# TailScale Exit Node Azure Builder Script

## Options
### List Regions
Lists available regions
```bash
./tsbuild.sh --list regions
```
### List VMs
List provisioned vms
```bash
./tsbuild.sh --list vms
```
### Build VM
Creates a new vm with tsuser account, the vmsize and image name are defined at the top of the script.
```bash
./tsbuild.sh --build -h [HOSTNAME] -r [REGION] [--ssh-key /path/to/key.pub]"
```
> Note: TailScale Key is requested at execution (Key must be generated by an account that is permitted to act as an exit node)

### Authorise Exit Node
1. (If Tailnet Lock is enabled) Sign Device
2. Enable Exit Node on Machine
3. (If tags are in use) Update Tags
4. Test

## Debugging
### Errors when provisioning the VM
#### Red Wall of errors
Look for key words - the common things to look for
- Capacity Restrictions - If you see this, it means you are not authorised to deploy in this region, try a different region
> As I break things I'll update this section

## Questions
no, ok.
